<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://api.openai.com https://generativelanguage.googleapis.com https://api.anthropic.com http://localhost:*">
  <title>SuperNinja AI</title>
  <link rel="stylesheet" href="styles.css">
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="logo">SN</div>
        <div>
          <h1>SuperNinja AI</h1>
          <div class="version">v1.0.0 &bull; GOAT Royalty Edition</div>
        </div>
      </div>

      <button class="new-chat-btn" onclick="newChat()">
        <span>+</span> New Chat
      </button>

      <div class="chat-history" id="chatHistory">
        <!-- Chat items populated by JS -->
      </div>

      <div class="sidebar-tools">
        <h3>Tools</h3>
        <div class="tool-grid">
          <button class="tool-btn" onclick="openTool('terminal')" title="Terminal">
            <span class="tool-icon">&#9000;</span>
            <span class="tool-label">Terminal</span>
          </button>
          <button class="tool-btn" onclick="openTool('filemanager')" title="Files">
            <span class="tool-icon">&#128193;</span>
            <span class="tool-label">Files</span>
          </button>
          <button class="tool-btn" onclick="openTool('codeeditor')" title="Code">
            <span class="tool-icon">&#128187;</span>
            <span class="tool-label">Code</span>
          </button>
          <button class="tool-btn" onclick="openTool('webbrowser')" title="Web">
            <span class="tool-icon">&#127760;</span>
            <span class="tool-label">Web</span>
          </button>
          <button class="tool-btn" onclick="openTool('imagetools')" title="Images">
            <span class="tool-icon">&#127912;</span>
            <span class="tool-label">Images</span>
          </button>
          <button class="tool-btn" onclick="openTool('audiotools')" title="Audio">
            <span class="tool-icon">&#127925;</span>
            <span class="tool-label">Audio</span>
          </button>
          <button class="tool-btn" onclick="openTool('pdftools')" title="PDF">
            <span class="tool-icon">&#128196;</span>
            <span class="tool-label">PDF</span>
          </button>
          <button class="tool-btn" onclick="openTool('dataanalysis')" title="Data">
            <span class="tool-icon">&#128202;</span>
            <span class="tool-label">Data</span>
          </button>
          <button class="tool-btn" onclick="openTool('axiom')" title="Axiom AI" style="border-color:var(--accent)">
            <span class="tool-icon">&#129302;</span>
            <span class="tool-label">Axiom</span>
          </button>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Top Bar -->
      <div class="top-bar">
        <button class="toggle-sidebar-btn" onclick="toggleSidebar()" title="Toggle Sidebar">&#9776;</button>
        
        <select class="model-selector" id="modelSelector" onchange="changeModel(this.value)">
          <optgroup label="OpenAI">
            <option value="gpt-4o">GPT-4o</option>
            <option value="gpt-4o-mini">GPT-4o Mini</option>
            <option value="gpt-4-turbo">GPT-4 Turbo</option>
            <option value="o1-preview">o1 Preview</option>
          </optgroup>
          <optgroup label="Google">
            <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
            <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
          </optgroup>
          <optgroup label="Anthropic">
            <option value="claude-3.5-sonnet">Claude 3.5 Sonnet</option>
            <option value="claude-3-opus">Claude 3 Opus</option>
          </optgroup>
          <optgroup label="Local">
            <option value="ollama-llama3">Ollama - Llama 3</option>
            <option value="ollama-mistral">Ollama - Mistral</option>
            <option value="ollama-codellama">Ollama - CodeLlama</option>
          </optgroup>
        </select>

        <span class="top-bar-title" id="topBarTitle">SuperNinja AI - Ready</span>

        <div class="status-indicator" id="statusIndicator" title="Connected"></div>
        
        <button class="toggle-sidebar-btn" onclick="openSettings()" title="Settings">&#9881;</button>
      </div>

      <!-- Chat Area -->
      <div class="chat-area" id="chatArea">
        <div class="welcome-screen" id="welcomeScreen">
          <div class="welcome-logo">&#9889;</div>
          <h2>SuperNinja AI</h2>
          <p>Your autonomous AI desktop assistant with full tool suite. Ask me anything, run commands, analyze files, browse the web, generate images, process data, and more.</p>
          
          <div class="quick-actions">
            <button class="quick-action" onclick="quickAction('Analyze my music catalog and generate a performance report')">
              <div class="qa-icon">&#127925;</div>
              <div class="qa-title">Music Analytics</div>
              <div class="qa-desc">Analyze your catalog and generate performance reports</div>
            </button>
            <button class="quick-action" onclick="quickAction('Help me write and debug code for my project')">
              <div class="qa-icon">&#128187;</div>
              <div class="qa-title">Code Assistant</div>
              <div class="qa-desc">Write, debug, and optimize code in any language</div>
            </button>
            <button class="quick-action" onclick="quickAction('Search the web for the latest music industry trends')">
              <div class="qa-icon">&#127760;</div>
              <div class="qa-title">Web Research</div>
              <div class="qa-desc">Search and analyze information from the web</div>
            </button>
            <button class="quick-action" onclick="quickAction('Calculate my royalties across all streaming platforms')">
              <div class="qa-icon">&#128176;</div>
              <div class="qa-title">Royalty Calculator</div>
              <div class="qa-desc">Calculate earnings across Spotify, Apple Music, YouTube & more</div>
            </button>
            <button class="quick-action" onclick="quickAction('Open the terminal and show system information')">
              <div class="qa-icon">&#9000;</div>
              <div class="qa-title">Terminal</div>
              <div class="qa-desc">Execute commands and manage your system</div>
            </button>
            <button class="quick-action" onclick="quickAction('Help me analyze a CSV data file with charts')">
              <div class="qa-icon">&#128202;</div>
              <div class="qa-title">Data Analysis</div>
              <div class="qa-desc">Process CSV, JSON, Excel files with visualizations</div>
            </button>
            <button class="quick-action" onclick="openTool('axiom')">
              <div class="qa-icon">&#129302;</div>
              <div class="qa-title">Axiom AI Automation</div>
              <div class="qa-desc">No-code browser bots, web scraping, and AI-powered automation</div>
            </button>
            <button class="quick-action" onclick="quickAction('Scrape data from a website and export to CSV')">
              <div class="qa-icon">&#128375;</div>
              <div class="qa-title">Web Scraping</div>
              <div class="qa-desc">Extract data from any website with AI-powered scraping</div>
            </button>
          </div>
        </div>
      </div>

      <!-- Input Area -->
      <div class="input-area">
        <div class="file-chips" id="fileChips"></div>
        <div class="input-container">
          <div class="input-toolbar">
            <button onclick="attachFile()" title="Attach File">&#128206;</button>
            <button onclick="openTool('terminal')" title="Terminal">&#9000;</button>
            <button onclick="openTool('codeeditor')" title="Code">&#128187;</button>
            <button onclick="openTool('webbrowser')" title="Web Search">&#128269;</button>
            <div class="separator"></div>
            <button onclick="openTool('imagetools')" title="Image Tools">&#127912;</button>
            <button onclick="openTool('audiotools')" title="Audio Tools">&#127925;</button>
            <button onclick="openTool('pdftools')" title="PDF Tools">&#128196;</button>
            <div class="separator"></div>
            <button onclick="clearChat()" title="Clear Chat">&#128465;</button>
          </div>
          <div class="input-row">
            <textarea id="message-input" placeholder="Ask SuperNinja anything... (Ctrl+Enter to send)" rows="1" onkeydown="handleKeyDown(event)" oninput="autoResize(this)"></textarea>
            <button class="send-btn" id="sendBtn" onclick="sendMessage()" title="Send">&#10148;</button>
          </div>
        </div>
        <div class="input-hint">
          SuperNinja AI &bull; Multi-LLM &bull; Terminal &bull; Code &bull; Web &bull; Files &bull; Images &bull; Audio &bull; Data &bull; GOAT Royalty Edition
        </div>
      </div>
    </main>

    <!-- Tool Panel (slides in from right) -->
    <div class="tool-panel" id="toolPanel">
      <div class="tool-panel-header">
        <h3 id="toolPanelTitle">Tool</h3>
        <button class="tool-panel-close" onclick="closeToolPanel()">&times;</button>
      </div>
      <div class="tool-panel-content" id="toolPanelContent">
        <!-- Dynamic tool content -->
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
      <div class="modal">
        <div class="modal-header">
          <h2>&#9881; Settings</h2>
          <button class="tool-panel-close" onclick="closeSettings()">&times;</button>
        </div>
        <div class="modal-body">
          <div class="setting-group">
            <h4>AI Provider API Keys</h4>
            <div class="setting-row">
              <span class="setting-label">OpenAI API Key</span>
              <input type="password" class="setting-input" id="openaiKeyInput" placeholder="sk-..." onchange="saveSetting('openaiKey', this.value)">
            </div>
            <div class="setting-row">
              <span class="setting-label">Google AI API Key</span>
              <input type="password" class="setting-input" id="googleKeyInput" placeholder="AI..." onchange="saveSetting('googleKey', this.value)">
            </div>
            <div class="setting-row">
              <span class="setting-label">Anthropic API Key</span>
              <input type="password" class="setting-input" id="anthropicKeyInput" placeholder="sk-ant-..." onchange="saveSetting('anthropicKey', this.value)">
            </div>
            <div class="setting-row">
              <span class="setting-label">Ollama URL</span>
              <input type="text" class="setting-input" id="ollamaUrlInput" placeholder="http://localhost:11434" onchange="saveSetting('ollamaUrl', this.value)">
            </div>
          </div>
          <div class="setting-group">
            <h4>Appearance</h4>
            <div class="setting-row">
              <span class="setting-label">Theme</span>
              <select class="setting-input" id="themeSelect" onchange="setTheme(this.value)" style="width:150px">
                <option value="dark">Dark</option>
                <option value="light">Light</option>
              </select>
            </div>
          </div>
          <div class="setting-group">
            <h4>Music Production</h4>
            <div class="setting-row">
              <span class="setting-label">Spotify Client ID</span>
              <input type="password" class="setting-input" id="spotifyIdInput" placeholder="Your Spotify Client ID" onchange="saveSetting('spotifyClientId', this.value)">
            </div>
            <div class="setting-row">
              <span class="setting-label">Supabase URL</span>
              <input type="text" class="setting-input" id="supabaseUrlInput" placeholder="https://your-project.supabase.co" onchange="saveSetting('supabaseUrl', this.value)">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="../axiom/axiom-ui.js"></script>
  <script src="app.js"></script>
</body>
</html>